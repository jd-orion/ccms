---
name: [é…ç½®æ€»è§ˆ]
route: /
---
import { Playground, Props } from "docz";

# CCMS


## ğŸŒ å…³äºCCMS
CCMSæ˜¯ä¸€å¥—å®Œå–„ã€é€šç”¨çš„å¯é…ç½®åŒ–çš„æ–¹æ¡ˆã€‚é€šè¿‡é…ç½®åŒ–è‡ªåŠ¨ç”Ÿæˆä¸­åå°ï¼ˆCMSï¼‰ç•Œé¢ã€‚<br/>
CCMSå°†å†…å®¹ç®¡ç†ç³»ç»Ÿå‰ç«¯é¡µé¢æŠ½è±¡ä¸ºåœ¨è‹¥å¹²APIè¿›è¡Œæµè½¬çš„ç³»ç»Ÿã€‚è¿›ä¸€æ­¥å°†å¯¹åå°APIçš„è¯·æ±‚æŒ‰ç…§é€»è¾‘ç±»å‹åˆ’åˆ†ä¸ºè¡¨å•æäº¤ã€åˆ—è¡¨å±•ç¤ºã€æŸ¥è¯¢æ•°æ®ç­‰ç±»å‹ã€‚é€šè¿‡JSONæ•°æ®æ ¼å¼æè¿°å„APIè¯·æ±‚çš„æ¥å£ä¿¡æ¯ã€å…¥å‚ã€å‡ºå‚åŠå„ç§å¸¸è§æ ¡éªŒå’Œç®€å•é€»è¾‘ï¼ŒåŠ¨æ€æ¸²æŸ“å‰ç«¯é¡µé¢ã€‚æœ€ç»ˆå®ç°é›¶å¼€å‘æ­å»ºå†…å®¹ç®¡ç†ç³»ç»Ÿã€‚

## âœ¨  ç‰¹ç‚¹
- ğŸ› ï¸ é…ç½®ç”ŸæˆCMSåå°ç®¡ç†ç•Œé¢
- ğŸ“š é€šè¿‡æ­¥éª¤è®¾è®¡è¦†ç›–ä¸åŒåå°ä¸šåŠ¡åº”ç”¨åœºæ™¯
- ğŸ¹ è·¨é¡µé¢æ•°æ®ä¼ è¾“ã€è·¨ç»„ä»¶äº¤äº’
- ğŸ æ”¯æŒå¼•å…¥ä¸åŒç»„ä»¶åº“


### å·¥ä½œåŸç†
é€šè¿‡ä»£ç†ç»„ä»¶çš„å±æ€§å®šä¹‰ã€æ•°æ®è¯·æ±‚ã€è·¨ç»„ä»¶äº¤äº’å’ŒçŠ¶æ€æœºåˆ¤æ–­ï¼Œå®ç°åŸºäºç»„ä»¶åŒ–çš„å‰ç«¯é¡µé¢é…ç½®åŒ–ã€‚

### ä¾¿æ·ä½¿ç”¨
é€šè¿‡é…ç½®JSONï¼Œå®šä¹‰è¡¨å•æ­¥éª¤ä¸ç»„ä»¶ã€‚ç”Ÿæˆå®Œæ•´çš„åå°ç®¡ç†åŠŸèƒ½ã€‚

### ç»„ä»¶åº“æ¥å…¥
å‚ç…§ç»„ä»¶å¼€å‘è§„èŒƒï¼Œå¼€å‘è€…å¯ä»¥æä¾›ä¸°å¯Œç§ç±»çš„ç»„ä»¶ä»¥ä¾›è‡ªå·±ä½¿ç”¨ï¼Œå¹¶å¯ä»¥å°†ç»„ä»¶å‘å¸ƒä¾›æ‰€ç”¨ç”¨æˆ·é€‰ç”¨ã€‚


## æ¨¡å—æ€»è§ˆ
CCMSç»„ä»¶é…ç½®æ–‡æ¡£ã€‚

### é…ç½®åŒ–ä¸»æ¨¡å—
å…±åˆ†ä¸ºäº”å¤§æ¨¡å—ï¼ˆæ­¥éª¤ï¼‰ï¼šæ¥å£è¯·æ±‚(type:fetch)ã€è¾“å…¥è¡¨å•(type:input)ã€åˆ—è¡¨ç­›é€‰ï¼ˆtype:filterï¼‰ã€æ•°æ®æŸ¥è¯¢ï¼ˆtype:skipï¼‰ã€è¾“å‡ºç»“æœ(type:table)ã€‚

### æ¥å£è¯·æ±‚(type:fetch)
æ”¯æŒGETã€POSTè¯·æ±‚ï¼Œå¯é…ç½®åŒ–çš„è¯·æ±‚å¤´ä¿¡æ¯ã€‚

### è¾“å…¥è¡¨å•(type:input)
æ”¯æŒ4ç§ç±»åˆ«ï¼šè¡¨å•ã€ç­›é€‰ã€å¯¼å‡º*ã€‚æœªæ¥è¦†ç›–90%è¡¨å•è¾“å…¥é¡¹ã€‚20ç§è¡¨å•ç»„ä»¶ã€‚

### åˆ—è¡¨ç­›é€‰ï¼ˆtype:filterï¼‰
è¡¨å•+è¡¨æ ¼çš„ç»„åˆå¼æŸ¥è¯¢

### æ•°æ®æŸ¥è¯¢ï¼ˆtype:skip)
è¡¨å•+æ¥å£è¯·æ±‚çš„ç»„åˆå¼æŸ¥è¯¢

### è¾“å‡ºç»“æœ(type:table)
æ”¯æŒè¡¨æ ¼7ç§ç»„ä»¶ã€‚åç»­è¾“å‡ºç»“æœå°†è¡¥å……ï¼ˆè¡¨æ ¼ã€å›¾è¡¨ã€è¯¦æƒ…ç­‰ï¼‰

ç›®å‰æ¨¡å—å¯ç»„åˆå‡º16ç§åŠä»¥ä¸Šçš„ä¸šåŠ¡åœºæ™¯ã€‚

* ä»¥ä¸Šé…ç½®åŒ–ä¿¡æ¯å¯æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œæ‹“å±•ã€‚ å¯è”ç³»æˆ‘ä»¬è¿›è¡Œå¼€æºè¡¥å……ã€‚


## å¼€å§‹ä½¿ç”¨

### ç›´æ¥ä½¿ç”¨
```
npm install ccms-antd
import { CCMS } from 'ccms-antd'

const App = () => (
  <>
    <CCMS
      checkPageAuth={async () => true}
      loadPageURL={async (id) => `/url?id=${id}&type=page`}
      loadPageFrameURL={async (id) => `/url?id=${id}&type=open`}
      loadPageConfig={async (page) => newConfig }
      sourceData={{}}
      callback={() => {
        if (window.history.length > 1) {
          window.history.back()
        } else {
          window.close()
        }
      }}
      config={config}
    />
  </>
);
```

## DEMO
import {CCMS} from "../index";

<CCMS
    checkPageAuth={async () => true}
    loadPageURL={async (id) => `/url?id=${id}&type=page`}
    loadPageFrameURL={async (id) => `/url?id=${id}&type=open`}
    loadPageConfig={async (page) => {}}
    sourceData={{}}
    callback={() => {
      if (window.history.length > 1) {
        window.history.back()
      } else {
        window.close()
      }
    }}
    config={{
      "basic": {
          "title": "æˆ‘çš„è¡¨å•ç¤ºä¾‹"
      },
      "steps": [
        {
          type: "form",
          layout: "horizontal",
          fields:[
                {
                    type:'text',
                    "field": "text",
                    "label": "è¿™æ˜¯ä¸€ä¸ªæäº¤æ­¥éª¤"
                },
          {
            label: "æ—¥æœŸæ—¶é—´",
            field: "datetime",
            type: "datetime",
            default: {
              type: "data",
              value: "2020-01-01"
            }
          },
          {
            label: "æ—¶é—´èŒƒå›´",
            field: "datetimeRange",
            type: "datetimeRange"
          },
          {
            label: "æ•°å€¼",
            field: "number",
            type: "number"
          },
          {
            label: "æ–‡æœ¬",
            field: "text",
            type: "text"
          },
          {
            label: "é•¿æ–‡æœ¬",
            field: "longtext",
            type: "longtext"
          },
          {
            label: "å•é€‰å±•ç¤ºæ¨¡å¼",
            field: "radio",
            type: "select_single",
            mode: "radio",
            default: {
              type: "static",
              value: "radio"
            },
            options: {
              from: "manual",
              data: [
                {
                  value: "dropdown",
                  label: "ä¸‹æ‹‰é€‰æ¡†"
                },
                {
                  value: "radio",
                  label: "å•é€‰æ¡†"
                },
                {
                  value: "button",
                  label: "æŒ‰é’®"
                }
              ]
            }
          },
          {
            label: "å¤šé€‰å±•ç¤ºæ¨¡å¼",
            field: "checkbox",
            type: "select_multiple",
            mode: "checkbox",
            options: {
              from: "manual",
              data: [
                {
                  value: "dropdown",
                  label: "ä¸‹æ‹‰é€‰æ¡†"
                },
                {
                  value: "checkbox",
                  label: "å¤é€‰æ¡†"
                }
              ]
            }
          },
          {
            label: "å¤šé€‰ä¸‹æ‹‰å±•ç¤ºæ¨¡å¼",
            field: "dropdown",
            type: "select_multiple",
            mode: "dropdown",
            default: {
              type: "static",
              value: ["radio"]
            },
            options: {
              from: "manual",
              data: [
                {
                  value: "dropdown",
                  label: "ä¸‹æ‹‰é€‰æ¡†"
                },
                {
                  value: "checkbox",
                  label: "å¤é€‰æ¡†"
                }
              ]
            }
          }
            ]
        },
        {
            "type": "fetch",
            "request": {
                "url": "https://j-api.jd.com/mocker/data?p=263&v=POST&u=list.do",
                "method": "GET"
            },
            "response": {
                "root": "result"
            },
            "condition": {
                "enable": true,
                "field": "code",
                "value": 0,
                "success": {
                   "type": "none",
                    "content": {
                        "type": "static",
                        "content": "æˆåŠŸ"
                    }
                },
                "fail": {
                    "type": "modal",
                    "content": {
                        "type": "field",
                        "field": "msg"
                    }
                }
            }
        }, {
            "type": "table",
            "primary": "index",
            "columns": [
                {
                    "label": "id",
                    "field": "id",
                    "type": "text",
                    "defaultValue": "æš‚æ— æ•°æ®"
                },
                {
                    "label": "datetime",
                    "field": "datetime",
                    "type": "text",
                    "defaultValue": "æš‚æ— æ•°æ®"
                },
                {
                    "label": "name",
                    "field": "name",
                    "type": "text",
                    "defaultValue": "æš‚æ— æ•°æ®"
                }
            ],
            "operations": {
                "rowOperations": [
                    {
                        "type": "button",
                        "label": "ç¼–è¾‘",
                        "handle": {
                            "type": "ccms","callback":true,
                            "page": "o_manage_list_edit",
                            "target": "current",
                            "data": {
                                "id": {
                                    "source": "record",
                                    "field": "id"
                                }
                            }
                        }
                    },
                    {
                        "type": "button",
                        "label": "åˆ é™¤",
                        "handle": {
                            "type": "ccms","callback":true,
                            "page": "o_manage_list_delete",
                            "target": "current",
                            "data": {
                                "id": {
                                    "source": "record",
                                    "field": "id"
                                }
                            }
                        },
                        "confirm": {
                            "enable": true,
                            "titleText": "ç¡®å®šåˆ é™¤åº”ç”¨å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤"
                        }
                    }
                ],
                "tableOperations": [
                    {
                        "type": "button",
                        "label": "+ å¯ä»¥æ–°å»ºåº”ç”¨",
                        "handle": {
                            "type": "ccms",
                            "callback":true,
                            "page": "o_manage_list_create",
                            "target": "current",
                            "data": {}
                        }
                    }
                ]
            }
        }
      ]
    }}/>


### DEMO config

```

{
      "basic": {
          "title": "æˆ‘çš„è¡¨å•"
      },
      "steps": [
        {
          type: "form",
          layout: "horizontal",
          fields:[
                {
                    type:'text',
                    "field": "text",
                    "label": "è¿™æ˜¯ä¸€ä¸ªæäº¤æ­¥éª¤"
                }
            ]
        },
        {
            "type": "fetch",
            "request": {
                "url": "https://j-api.jd.com/mocker/data?p=263&v=POST&u=list.do",
                "method": "GET"
            },
            "response": {
                "root": "result"
            },
            "condition": {
                "enable": true,
                "field": "code",
                "value": 0,
                "success": {
                   "type": "none",
                    "content": {
                        "type": "static",
                        "content": "æˆåŠŸ"
                    }
                },
                "fail": {
                    "type": "modal",
                    "content": {
                        "type": "field",
                        "field": "msg"
                    }
                }
            }
        }, {
            "type": "table",
            "primary": "index",
            "columns": [
                {
                    "label": "id",
                    "field": "id",
                    "type": "text",
                    "defaultValue": "æš‚æ— æ•°æ®"
                },
                {
                    "label": "datetime",
                    "field": "datetime",
                    "type": "text",
                    "defaultValue": "æš‚æ— æ•°æ®"
                },
                {
                    "label": "name",
                    "field": "name",
                    "type": "text",
                    "defaultValue": "æš‚æ— æ•°æ®"
                }
            ],
            "operations": {
                "rowOperations": [
                    {
                        "type": "button",
                        "label": "ç¼–è¾‘",
                        "handle": {
                            "type": "ccms","callback":true,
                            "page": "o_manage_list_edit",
                            "target": "current",
                            "data": {
                                "id": {
                                    "source": "record",
                                    "field": "id"
                                }
                            }
                        }
                    },
                    {
                        "type": "button",
                        "label": "åˆ é™¤",
                        "handle": {
                            "type": "ccms","callback":true,
                            "page": "o_manage_list_delete",
                            "target": "current",
                            "data": {
                                "id": {
                                    "source": "record",
                                    "field": "id"
                                }
                            }
                        },
                        "confirm": {
                            "enable": true,
                            "titleText": "ç¡®å®šåˆ é™¤åº”ç”¨å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤"
                        }
                    }
                ],
                "tableOperations": [
                    {
                        "type": "button",
                        "label": "+ å¯ä»¥æ–°å»ºåº”ç”¨",
                        "handle": {
                            "type": "ccms",
                            "callback":true,
                            "page": "o_manage_list_create",
                            "target": "current",
                            "data": {}
                        }
                    }
                ]
            }
        }
      ]
    }
```


### æ¥å…¥è‡ªå®šä¹‰UIç»„ä»¶

```
npm install ccms
```
å¯é€šè¿‡ccmsä¸­çš„ç»„ä»¶å®šä¹‰è¿›è¡ŒUIé‡ç½®ã€‚


